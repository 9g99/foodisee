<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>근처 맛집 찾기</title>
</head>
<body>
  <h1>내 주변 맛집 리스트</h1>
  <ul id="places"></ul>

  <script>
    const places = [
      { name: "맛집1", lat: 37.49794, lng: 127.02758 }, // 강남역
      { name: "맛집2", lat: 37.56668, lng: 126.97843 }, // 서울 시청
    ];

    function getDistanceFromLatLonInKm(lat1, lon1, lat2, lon2) {
      const R = 6371;
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLon = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }

    navigator.geolocation.getCurrentPosition(function(position) {
      const userLat = position.coords.latitude;
      const userLng = position.coords.longitude;

      const nearby = places.filter(place => {
        const distance = getDistanceFromLatLonInKm(userLat, userLng, place.lat, place.lng);
        return distance < 2; // 2km 이내만 표시
      });

      const ul = document.getElementById('places');
      nearby.forEach(place => {
        const li = document.createElement('li');
        li.innerHTML = `<a href="https://maps.google.com/?q=${place.lat},${place.lng}" target="_blank">${place.name}</a>`;
        ul.appendChild(li);
      });

      if (nearby.length === 0) {
        ul.innerHTML = '<li>근처에 등록된 맛집이 없습니다.</li>';
      }
    }, function(error) {
      alert('위치 정보 접근이 거부되었습니다. 위치 권한을 허용해주세요.');
    });
  </script>
</body>
</html>
