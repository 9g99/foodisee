<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>foodisee</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f5f5f5;
    }
    header {
      background: #4CAF50;
      color: white;
      padding: 1rem;
      text-align: center;
      font-size: 2rem;
      font-weight: bold;
    }
    main {
      padding: 2rem;
    }
    h1 {
      font-size: 1.2rem;
      text-align: center;
      margin-bottom: 1rem;
    }
    .location {
      text-align: center;
      margin-bottom: 2rem;
      font-size: 1rem;
    }
    iframe {
      width: 100%;
      height: 400px;
      border: none;
      border-radius: 10px;
      margin-bottom: 2rem;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    ul li {
      background: #eef;
      margin-bottom: 1rem;
      padding: 1rem;
      border-radius: 8px;
    }
    .distance-info {
      font-size: 0.9rem;
      color: #555;
      margin-top: 0.5rem;
    }
  </style>
</head>
<body>
  <header>foodisee</header>
  <main>
    <h1>내 주변 맛집 찾기</h1>
    <div class="location" id="current-location">현재 위치를 가져오는 중...</div>

    <iframe src="https://www.google.com/maps/d/u/0/embed?mid=1g6Nlmx4DX38L0t0UAZnNQVd9aRd9trw&ehbc=2E312F" allowfullscreen></iframe>

    <ul id="restaurant-list">
      <!-- 여기 주변 음식점 리스트가 들어감 -->
    </ul>
  </main>

  <script>
    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition, showError);
      } else {
        document.getElementById("current-location").innerText = "이 브라우저는 위치 정보를 지원하지 않습니다.";
      }
    }

    function showPosition(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;

      // 주소 변환 (Geocoding API 필요) 없이 그냥 좌표 출력
      document.getElementById("current-location").innerText = `위도: ${lat.toFixed(5)}, 경도: ${lon.toFixed(5)}`;

      // 👉 여기서 Places API로 '실제 음식점 리스트'를 가져와야 하는데
      // API Key가 없으므로 현재는 샘플 코드로 남겨둠
    }

    function showError(error) {
      switch(error.code) {
        case error.PERMISSION_DENIED:
          document.getElementById("current-location").innerText = "위치 정보 접근이 거부되었습니다.";
          break;
        case error.POSITION_UNAVAILABLE:
          document.getElementById("current-location").innerText = "위치 정보를 사용할 수 없습니다.";
          break;
        case error.TIMEOUT:
          document.getElementById("current-location").innerText = "위치 정보를 가져오는 데 시간이 초과되었습니다.";
          break;
        case error.UNKNOWN_ERROR:
          document.getElementById("current-location").innerText = "알 수 없는 오류가 발생했습니다.";
          break;
      }
    }

    window.onload = getLocation;
  </script>
</body>
</html>
